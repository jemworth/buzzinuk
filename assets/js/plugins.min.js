// core.js
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";function e(t){f.Plugins[t].initialized||(f.Plugins[t].methods._setup.call(document),f.Plugins[t].initialized=!0)}function n(t,e,n,s){var i,r={raw:{}};s=s||{};for(i in s)s.hasOwnProperty(i)&&("classes"===t?(r.raw[s[i]]=e+"-"+s[i],r[s[i]]="."+e+"-"+s[i]):(r.raw[i]=s[i],r[i]=s[i]+"."+e));for(i in n)n.hasOwnProperty(i)&&("classes"===t?(r.raw[i]=n[i].replace(/{ns}/g,e),r[i]=n[i].replace(/{ns}/g,"."+e)):(r.raw[i]=n[i].replace(/.{ns}/g,""),r[i]=n[i].replace(/{ns}/g,e)));return r}function s(){var t,e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},n=["transition","-webkit-transition"],s={transform:"transform",MozTransform:"-moz-transform",OTransform:"-o-transform",msTransform:"-ms-transform",webkitTransform:"-webkit-transform"},i="transitionend",r="",o="",a=document.createElement("div");for(t in e)if(e.hasOwnProperty(t)&&t in a.style){i=e[t],f.support.transition=!0;break}w.transitionEnd=i+".{ns}";for(t in n)if(n.hasOwnProperty(t)&&n[t]in a.style){r=n[t];break}f.transition=r;for(t in s)if(s.hasOwnProperty(t)&&s[t]in a.style){f.support.transform=!0,o=s[t];break}f.transform=o}function i(){f.windowWidth=f.$window.width(),f.windowHeight=f.$window.height(),m=d.startTimer(m,y,r)}function r(){for(var t in f.ResizeHandlers)f.ResizeHandlers.hasOwnProperty(t)&&f.ResizeHandlers[t].callback.call(window,f.windowWidth,f.windowHeight)}function o(){if(f.support.raf){f.window.requestAnimationFrame(o);for(var t in f.RAFHandlers)f.RAFHandlers.hasOwnProperty(t)&&f.RAFHandlers[t].callback.call(window)}}function a(t,e){return parseInt(t.priority)-parseInt(e.priority)}var c="undefined"!=typeof window?window:this,l=c.document,u=function(){this.Version="@version",this.Plugins={},this.DontConflict=!1,this.Conflicts={fn:{}},this.ResizeHandlers=[],this.RAFHandlers=[],this.window=c,this.$window=t(c),this.document=l,this.$document=t(l),this.$body=null,this.windowWidth=0,this.windowHeight=0,this.fallbackWidth=1024,this.fallbackHeight=768,this.userAgent=window.navigator.userAgent||window.navigator.vendor||window.opera,this.isFirefox=/Firefox/i.test(this.userAgent),this.isChrome=/Chrome/i.test(this.userAgent),this.isSafari=/Safari/i.test(this.userAgent)&&!this.isChrome,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(this.userAgent),this.isIEMobile=/IEMobile/i.test(this.userAgent),this.isFirefoxMobile=this.isFirefox&&this.isMobile,this.transform=null,this.transition=null,this.support={file:!!(window.File&&window.FileList&&window.FileReader),history:!!(window.history&&window.history.pushState&&window.history.replaceState),matchMedia:!(!window.matchMedia&&!window.msMatchMedia),pointer:!!window.PointerEvent,raf:!(!window.requestAnimationFrame||!window.cancelAnimationFrame),touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),transition:!1,transform:!1}},d={killEvent:function(t,e){try{t.preventDefault(),t.stopPropagation(),e&&t.stopImmediatePropagation()}catch(n){}},startTimer:function(t,e,n,s){return d.clearTimer(t),s?setInterval(n,e):setTimeout(n,e)},clearTimer:function(t,e){t&&(e?clearInterval(t):clearTimeout(t),t=null)},sortAsc:function(t,e){return parseInt(t,10)-parseInt(e,10)},sortDesc:function(t,e){return parseInt(e,10)-parseInt(t,10)},decodeEntities:function(t){var e=f.document.createElement("textarea");return e.innerHTML=t,e.value},parseQueryString:function(t){for(var e={},n=t.slice(t.indexOf("?")+1).split("&"),s=0;s<n.length;s++){var i=n[s].split("=");e[i[0]]=i[1]}return e}},f=new u,p=t.Deferred(),h={base:"{ns}",element:"{ns}-element"},w={namespace:".{ns}",beforeUnload:"beforeunload.{ns}",blur:"blur.{ns}",change:"change.{ns}",click:"click.{ns}",dblClick:"dblclick.{ns}",drag:"drag.{ns}",dragEnd:"dragend.{ns}",dragEnter:"dragenter.{ns}",dragLeave:"dragleave.{ns}",dragOver:"dragover.{ns}",dragStart:"dragstart.{ns}",drop:"drop.{ns}",error:"error.{ns}",focus:"focus.{ns}",focusIn:"focusin.{ns}",focusOut:"focusout.{ns}",input:"input.{ns}",keyDown:"keydown.{ns}",keyPress:"keypress.{ns}",keyUp:"keyup.{ns}",load:"load.{ns}",mouseDown:"mousedown.{ns}",mouseEnter:"mouseenter.{ns}",mouseLeave:"mouseleave.{ns}",mouseMove:"mousemove.{ns}",mouseOut:"mouseout.{ns}",mouseOver:"mouseover.{ns}",mouseUp:"mouseup.{ns}",panStart:"panstart.{ns}",pan:"pan.{ns}",panEnd:"panend.{ns}",resize:"resize.{ns}",scaleStart:"scalestart.{ns}",scaleEnd:"scaleend.{ns}",scale:"scale.{ns}",scroll:"scroll.{ns}",select:"select.{ns}",swipe:"swipe.{ns}",touchCancel:"touchcancel.{ns}",touchEnd:"touchend.{ns}",touchLeave:"touchleave.{ns}",touchMove:"touchmove.{ns}",touchStart:"touchstart.{ns}"};u.prototype.NoConflict=function(){f.DontConflict=!0;for(var e in f.Plugins)f.Plugins.hasOwnProperty(e)&&(t[e]=f.Conflicts[e],t.fn[e]=f.Conflicts.fn[e])},u.prototype.Plugin=function(s,i){return f.Plugins[s]=function(e,s){function i(n){var i,r,a,c="object"===t.type(n),l=this,u=t();for(n=t.extend(!0,{},s.defaults||{},c?n:{}),r=0,a=l.length;a>r;r++)if(i=l.eq(r),!o(i)){var d="__"+s.guid++,f=s.classes.raw.base+d,p=i.data(e+"-options"),h=t.extend(!0,{$el:i,guid:d,rawGuid:f,dotGuid:"."+f},n,"object"===t.type(p)?p:{});i.addClass(s.classes.raw.element).data(y,h),s.methods._construct.apply(i,[h].concat(Array.prototype.slice.call(arguments,c?1:0))),u=u.add(i)}for(r=0,a=u.length;a>r;r++)i=u.eq(r),s.methods._postConstruct.apply(i,[o(i)]);return l}function r(t){s.functions.iterate.apply(this,[s.methods._destruct].concat(Array.prototype.slice.call(arguments,1))),this.removeClass(s.classes.raw.element).removeData(y)}function o(t){return t.data(y)}function c(e){if(this instanceof t){var n=s.methods[e];return"object"!==t.type(e)&&e?n&&0!==e.indexOf("_")?s.functions.iterate.apply(this,[n].concat(Array.prototype.slice.call(arguments,1))):this:i.apply(this,arguments)}}function l(e){var n=s.utilities[e]||s.utilities._initialize||!1;return n?n.apply(window,Array.prototype.slice.call(arguments,"object"===t.type(e)?0:1)):void 0}function u(e){s.defaults=t.extend(!0,s.defaults,e||{})}function p(e){for(var n=this,s=0,i=n.length;i>s;s++){var r=n.eq(s),a=o(r)||{};"undefined"!==t.type(a.$el)&&e.apply(r,[a].concat(Array.prototype.slice.call(arguments,1)))}return n}var m="fs-"+e,y="fs"+e.replace(/(^|\s)([a-z])/g,function(t,e,n){return e+n.toUpperCase()});return s.initialized=!1,s.priority=s.priority||10,s.classes=n("classes",m,h,s.classes),s.events=n("events",e,w,s.events),s.functions=t.extend({getData:o,iterate:p},d,s.functions),s.methods=t.extend(!0,{_setup:t.noop,_construct:t.noop,_postConstruct:t.noop,_destruct:t.noop,_resize:!1,destroy:r},s.methods),s.utilities=t.extend(!0,{_initialize:!1,_delegate:!1,defaults:u},s.utilities),s.widget&&(f.Conflicts.fn[e]=t.fn[e],t.fn[y]=c,f.DontConflict||(t.fn[e]=t.fn[y])),f.Conflicts[e]=t[e],t[y]=s.utilities._delegate||l,f.DontConflict||(t[e]=t[y]),s.namespace=e,s.namespaceClean=y,s.guid=0,s.methods._resize&&(f.ResizeHandlers.push({namespace:e,priority:s.priority,callback:s.methods._resize}),f.ResizeHandlers.sort(a)),s.methods._raf&&(f.RAFHandlers.push({namespace:e,priority:s.priority,callback:s.methods._raf}),f.RAFHandlers.sort(a)),s}(s,i),p.then(function(){e(s)}),f.Plugins[s]};var m=null,y=20;return f.$window.on("resize.fs",i),i(),o(),t(function(){f.$body=t("body"),p.resolve(),f.support.nativeMatchMedia=f.support.matchMedia&&!t("html").hasClass("no-matchmedia")}),w.clickTouchStart=w.click+" "+w.touchStart,s(),window.Formstone=f,f});

// navigation.js
!function(a){"function"==typeof define&&define.amd?define(["jquery","./core","./mediaquery","./swap"],a):a(jQuery,Formstone)}(function(a,e){"use strict";function t(){j=a("html, body")}function n(e){e.handleGuid=G.handle+e.guid,e.isToggle="toggle"===e.type,e.open=!1,e.isToggle&&(e.gravity="");var t=G.base,n=[t,e.type].join("-"),l=e.gravity?[n,e.gravity].join("-"):"",d=[e.rawGuid,e.theme,e.customClass].join(" ");e.handle=this.data(w+"-handle"),e.content=this.data(w+"-content"),e.handleClasses=[G.handle,G.handle.replace(t,n),l?G.handle.replace(t,l):"",e.handleGuid,d].join(" "),e.thisClasses=[G.nav.replace(t,n),l?G.nav.replace(t,l):"",d],e.contentClasses=[G.content.replace(t,n),d].join(" "),e.contentClassesOpen=[l?G.content.replace(t,l):"",G.open].join(" "),e.$nav=this.addClass(e.thisClasses.join(" ")).attr("role","navigation"),e.$handle=a(e.handle).addClass(e.handleClasses),e.$content=a(e.content).addClass(e.contentClasses),e.$animate=a().add(e.$nav).add(e.$content),$(e),e.navTabIndex=e.$nav.attr("tabindex"),e.$nav.attr("tabindex",-1),e.id=this.attr("id"),e.id?e.ariaId=e.id:(e.ariaId=e.rawGuid,this.attr("id",e.ariaId)),e.$handle.attr("data-swap-target",e.dotGuid).attr("data-swap-linked",e.handleGuid).attr("data-swap-group",G.base).attr("tabindex",0).on("activate.swap"+e.dotGuid,e,u).on("deactivate.swap"+e.dotGuid,e,p).on("enable.swap"+e.dotGuid,e,f).on("disable.swap"+e.dotGuid,e,v).on(x.focus+e.dotGuid,e,r).on(x.blur+e.dotGuid,e,c).fsSwap({maxWidth:e.maxWidth,classes:{target:e.dotGuid,enabled:y.enabled,active:y.open,raw:{target:e.rawGuid,enabled:G.enabled,active:G.open}}}),e.$handle.is("a, button")||e.$handle.on(x.keyPress+e.dotGuid,e,h)}function l(a){a.$content.removeClass([a.contentClasses,a.contentClassesOpen].join(" ")).off(x.namespace),a.$handle.removeAttr("aria-controls").removeAttr("aria-expanded").removeAttr("data-swap-target").removeData("swap-target").removeAttr("data-swap-linked").removeAttr("data-swap-group").removeData("swap-linked").removeData("tabindex").removeClass(a.handleClasses).off(a.dotGuid).html(a.originalLabel).fsSwap("destroy"),a.$nav.attr("tabindex",a.navTabIndex),b(a),g(a),this.removeAttr("aria-hidden").removeClass(a.thisClasses.join(" ")).off(x.namespace),this.attr("id")===a.rawGuid&&this.removeAttr("id")}function d(a){a.$handle.fsSwap("activate")}function o(a){a.$handle.fsSwap("deactivate")}function s(a){a.$handle.fsSwap("enable")}function i(a){a.$handle.fsSwap("disable")}function r(a){a.data.$handle.addClass(G.focus)}function c(a){a.data.$handle.removeClass(G.focus)}function h(a){var e=a.data;(13===a.keyCode||32===a.keyCode)&&(k.killEvent(a),e.$handle.trigger(x.raw.click))}function u(a){if(!a.originalEvent){var e=a.data;e.open||(e.$el.trigger(x.open).attr("aria-hidden",!1),e.$content.addClass(e.contentClassesOpen).one(x.click,function(){o(e)}),e.$handle.attr("aria-expanded",!0),e.label&&e.$handle.html(e.labels.open),m(e),e.open=!0,e.$nav.focus())}}function p(a){if(!a.originalEvent){var e=a.data;e.open&&(e.$el.trigger(x.close).attr("aria-hidden",!0),e.$content.removeClass(e.contentClassesOpen).off(x.namespace),e.$handle.attr("aria-expanded",!1),e.label&&e.$handle.html(e.labels.closed),g(e),e.open=!1,e.$el.focus())}}function f(a){var e=a.data;e.$el.attr("aria-hidden",!0),e.$handle.attr("aria-controls",e.ariaId).attr("aria-expanded",!1),e.$content.addClass(G.enabled),setTimeout(function(){e.$animate.addClass(G.animated)},0),e.label&&e.$handle.html(e.labels.closed)}function v(a){var e=a.data;e.$el.removeAttr("aria-hidden"),e.$handle.removeAttr("aria-controls").removeAttr("aria-expanded"),e.$content.removeClass(G.enabled,G.animated),e.$animate.removeClass(G.animated),b(e),g(e)}function m(a){a.isToggle||j.addClass(G.lock)}function g(a){a.isToggle||j.removeClass(G.lock)}function $(a){if(a.label)if(a.$handle.length>1){a.originalLabel=[];for(var e=0,t=a.$handle.length;t>e;e++)a.originalLabel[e]=a.$handle.eq(e).html()}else a.originalLabel=a.$handle.html()}function b(a){if(a.label)if(a.$handle.length>1)for(var e=0,t=a.$handle.length;t>e;e++)a.$handle.eq(e).html(a.originalLabel[e]);else a.$handle.html(a.originalLabel)}var C=e.Plugin("navigation",{widget:!0,defaults:{customClass:"",gravity:"left",label:!0,labels:{closed:"Menu",open:"Close"},maxWidth:"980px",theme:"fs-light",type:"toggle"},classes:["handle","nav","content","animated","enabled","focus","open","toggle","push","reveal","overlay","left","right","lock"],events:{open:"open",close:"close"},methods:{_setup:t,_construct:n,_destruct:l,open:d,close:o,enable:s,disable:i}}),w=C.namespace,y=C.classes,G=y.raw,x=C.events,k=C.functions,j=null});

// mediaquery.js
!function(e){"function"==typeof define&&define.amd?define(["jquery","./core"],e):e(jQuery,Formstone)}(function(e,t){"use strict";function i(t){t=t||{};for(var i in w)w.hasOwnProperty(i)&&(f[i]=t[i]?e.merge(t[i],f[i]):f[i]);f=e.extend(f,t),f.minWidth.sort(u.sortDesc),f.maxWidth.sort(u.sortAsc),f.minHeight.sort(u.sortDesc),f.maxHeight.sort(u.sortAsc);for(var n in w)if(w.hasOwnProperty(n)){y[n]={};for(var a in f[n])if(f[n].hasOwnProperty(a)){var r=window.matchMedia("("+w[n]+": "+(f[n][a]===1/0?1e5:f[n][a])+f.unit+")");r.addListener(o),y[n][f[n][a]]=r}}o()}function n(e,t,i){var n=l.matchMedia(t),a=h(n.media);g[a]||(g[a]={mq:n,active:!0,enter:{},leave:{}},g[a].mq.addListener(s));for(var r in i)i.hasOwnProperty(r)&&g[a].hasOwnProperty(r)&&(g[a][r][e]=i[r]);var o=g[a],c=n.matches;c&&o[m.enter].hasOwnProperty(e)?(o[m.enter][e].apply(n),o.active=!0):!c&&o[m.leave].hasOwnProperty(e)&&(o[m.leave][e].apply(n),o.active=!1)}function a(e,t){if(e)if(t){var i=h(t);g[i]&&(g[i].enter[e]&&delete g[i].enter[e],g[i].leave[e]&&delete g[i].leave[e])}else for(var n in g)g.hasOwnProperty(n)&&(g[n].enter[e]&&delete g[n].enter[e],g[n].leave[e]&&delete g[n].leave[e])}function r(){p={unit:f.unit};for(var e in w)if(w.hasOwnProperty(e))for(var i in y[e])if(y[e].hasOwnProperty(i)){var n="Infinity"===i?1/0:parseInt(i,10),a=w[e].indexOf("width")>-1?t.fallbackWidth:t.fallbackHeight,r=e.indexOf("max")>-1;t.support.nativeMatchMedia?y[e][i].matches&&(r?(!p[e]||n<p[e])&&(p[e]=n):(!p[e]||n>p[e])&&(p[e]=n)):r?!p[e]&&n>a&&(p[e]=n):(!p[e]&&0!==p[e]||n>p[e]&&a>n)&&(p[e]=n)}}function o(){r(),v.trigger(m.mqChange,[p])}function s(e){var t=h(e.media),i=g[t],n=e.matches,a=n?m.enter:m.leave;if(i&&(i.active||!i.active&&n)){for(var r in i[a])i[a].hasOwnProperty(r)&&i[a][r].apply(i.mq);i.active=!0}}function h(e){return e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"").replace(/^\s+|\s+$/g,"")}function c(){return p}var d=t.Plugin("mediaquery",{utilities:{_initialize:i,state:c,bind:n,unbind:a},events:{mqChange:"mqchange"}}),f={minWidth:[0],maxWidth:[1/0],minHeight:[0],maxHeight:[1/0],unit:"px"},m=e.extend(d.events,{enter:"enter",leave:"leave"}),v=t.$window,l=v[0],u=d.functions,p=null,g=[],y={},w={minWidth:"min-width",maxWidth:"max-width",minHeight:"min-height",maxHeight:"max-height"}});

// swap.js
!function(e){"function"==typeof define&&define.amd?define(["jquery","./core","./mediaquery"],e):e(jQuery,Formstone)}(function(e,a){"use strict";function t(a){a.enabled=!1,a.active=!1,a.classes=e.extend(!0,{},v,a.classes),a.target=this.data(u+"-target"),a.$target=e(a.target).addClass(a.classes.raw.target),a.mq="(max-width:"+(a.maxWidth===1/0?"100000px":a.maxWidth)+")";var t=this.data(u+"-linked");a.linked=t?"[data-"+u+'-linked="'+t+'"]':!1;var s=this.data(u+"-group");a.group=s?"[data-"+u+'-group="'+s+'"]':!1,a.$swaps=e().add(this).add(a.$target),this.on(p.click+a.dotGuid,a,r)}function s(a){a.collapse||!a.group||e(a.group).filter("[data-"+u+"-active]").length||e(a.group).eq(0).attr("data-"+u+"-active","true"),a.onEnable=this.data(u+"-active")||!1,e.fsMediaquery("bind",a.rawGuid,a.mq,{enter:function(){c.call(a.$el,a,!0)},leave:function(){d.call(a.$el,a,!0)}})}function i(a){e.fsMediaquery("unbind",a.rawGuid),a.$swaps.removeClass([a.classes.raw.enabled,a.classes.raw.active].join(" ")).off(p.namespace)}function n(a,t){if(a.enabled&&!a.active){a.group&&!t&&e(a.group).not(a.$el).not(a.linked)[o.namespaceClean]("deactivate",!0);var s=a.group?e(a.group).index(a.$el):null;a.$swaps.addClass(a.classes.raw.active),t||a.linked&&e(a.linked).not(a.$el)[o.namespaceClean]("activate",!0),this.trigger(p.activate,[s]),a.active=!0}}function l(a,t){a.enabled&&a.active&&(a.$swaps.removeClass(a.classes.raw.active),t||a.linked&&e(a.linked).not(a.$el)[o.namespaceClean]("deactivate",!0),this.trigger(p.deactivate),a.active=!1)}function c(a,t){a.enabled||(a.enabled=!0,a.$swaps.addClass(a.classes.raw.enabled),t||e(a.linked).not(a.$el)[o.namespaceClean]("enable"),this.trigger(p.enable),a.onEnable?(a.active=!1,n.call(this,a)):(a.active=!0,l.call(this,a)))}function d(a,t){a.enabled&&(a.enabled=!1,a.$swaps.removeClass([a.classes.raw.enabled,a.classes.raw.active].join(" ")),t||e(a.linked).not(a.$el)[o.namespaceClean]("disable"),this.trigger(p.disable))}function r(e){g.killEvent(e);var a=e.data;a.active&&a.collapse?l.call(a.$el,a):n.call(a.$el,a)}var o=a.Plugin("swap",{widget:!0,defaults:{collapse:!0,maxWidth:1/0},classes:["target","enabled","active"],events:{activate:"activate",deactivate:"deactivate",enable:"enable",disable:"disable"},methods:{_construct:t,_postConstruct:s,_destruct:i,activate:n,deactivate:l,enable:c,disable:d}}),u=o.namespace,v=o.classes,p=o.events,g=o.functions});